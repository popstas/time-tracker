<!DOCTYPE html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <title>Задачи</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <link rel="stylesheet" href="css/smoothness/jquery-ui-1.10.3.custom.css">
    <link rel="stylesheet" type="text/css" href="css/fontello.css">
    <link rel="stylesheet/less" type="text/css" href="less/main.less">

    <script src="js/jquery-2.0.3.min.js"></script>
    <script src="js/jquery-ui-1.10.3.custom.min.js"></script>
    <!--<script src="js/jquery.ui.touch-punch.js"></script>-->
    <script src="js/jquery.mjs.nestedSortable.js"></script>
    <script src="js/less-1.5.0.min.js"></script>
    <script src="js/underscore.js"></script>
    <script src="js/backbone.js"></script>
    <script src="js/backbone.localStorage.js"></script>

    <!--<script src="js/backbone.marionette.js"></script>
    <script src="js/backbone.wreqr.js"></script>
    <script src="js/backbone.babysitter.js"></script>-->

    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>
</head>
<body>


<div id="content">
    <header id="header">
        <div id="new-task">
            <input name="name" autofocus  autocomplete="off" placeholder="Новая задача" type="text"/>
            <input name="time_plan" placeholder="план" type="text"/>
            <input name="time" placeholder="факт" type="text"/>
        </div>
        <span class="task-button settings"><i class="icon-cog"></i></span>
    </header>
    <main id="main">
        <div id="tasks">
            <ul id="task-list" class="sortable selectable"></ul>
        </div>
    </main>
    <footer id="footer">
        <div id="task-stats"></div>
    </footer>
</div>


<script type="text/template" id="item-template">
    <div id="<%= id %>" class="task <%= done ? 'done' : '' %> <%= started ? 'started' : '' %>">
        <div class="display">

            <input name="done" class="check" type="checkbox" <%= done ? 'checked="checked"' : '' %> />
            <label class="task-name"><%= name %></label>

            <span class="time">
                <style>
                    [id="<%= id %>"] .task-time_plan:after{ display: inline-block; content:':<%= (time_plan%60+'').lpad('0',2) %>' }
                    [id="<%= id %>"] .task-time:after{ display: inline-block; content:':<%= (time%60+'').lpad('0',2) %>' }
                </style>
                <span class="white"> | </span><span class="task-time_plan"><%= parseInt(time_plan/60) %></span>
                <span class="white"> | </span><span class="task-time"><%= parseInt(time/60) %></span>
            </span>
            <span class="task-control">
                <span class="task-button tooltip task-comment" title="<%= comment %>"><i class="icon-comment<%= comment ? '' : '-empty'%>"></i></span>
                <span class="task-button task-edit"><i class="icon-pencil"></i></span>
                <span class="task-button task-destroy"><i class="icon-cancel"></i></span>
                <span class="task-button task-start"><i class="icon-play"></i></span>
                <span class="task-button task-stop"><i class="icon-pause"></i></span>
            </span>
            <span class="comment white"> | <%= comment %></span>
        </div>

        <div class="edit">
            <input name="name" class="task-name-edit" type="text" value=""/>
            <span class="time">
                <input name="time_plan" class="task-time-edit" type="text" value=""/>
                <input name="time" class="task-time-edit" type="text" value=""/>
            </span>
        </div>
    </div>
</script>


<script type="text/template" id="stats-template">
    <% if (total) { %>
    <div>
        <span class="task-count">
            <span class="number"><%= done %> / <%= total %> </span> задач выполнено

        </span>
        <span class="time">
            <span class="total-time_plan"><%= parseInt(total_time_plan/60)+':'+(total_time_plan%60+'').lpad('0',2) %></span>
            <span class="total-time"><%= parseInt(total_time/60)+':'+(total_time%60+'').lpad('0',2) %></span>
        </span>
    </div>
    <div>
        <span>Время в часах</span>
        <span class="time">
            <span class="total-time_plan"><%= (total_time_plan/3600).toFixed(1) %></span>
            <span class="total-time"><%= (total_time/3600).toFixed(1) %></span>
        </span>
    </div>
    <% } %>
</script>


<script type="text/template" id="settings-template">
    <div>
        <div class="block-share share">
            <span class="task-button share"><i class="icon-share"></i></span>
            <span title="Скопировать код задач для вставки в другой браузер" class="task-button export-json"><i class="icon-code"></i></span>
            <span title="Отправить задачи на email" class="task-button export-email"><i class="icon-mail"></i></span>
            <span title="Показать таблицу для вставки задач в Excel" class="task-button export-table"><i class="icon-table"></i></span>
        </div>
    </div>
</script>


<script type="text/template" id="export-json-template">
    <div>
        <div>Скопируйте текст в текстовом поле и вставьте в другом браузере в поле "Новая задача", нажмите Enter.
        Если эти задачи уже добавлялись ранее, они не будут обновлены.</div>
        <textarea class="json-data"><%= json %></textarea>
    </div>
</script>


<script type="text/template" id="comment-edit-template">
    <div>
        <textarea name="comment" class="task-comment"><%= comment %></textarea>
    </div>
</script>


</body>
</html>
